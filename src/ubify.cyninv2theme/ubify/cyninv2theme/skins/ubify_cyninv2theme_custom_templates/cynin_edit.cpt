<tal:block metal:define-macro="master"
           define="view context/@@at_base_edit_view;
                   dummy python:view.isTemporaryObject() and request.set('disable_border', True);
                   lifecycle context/@@at_lifecycle_view;
                   lock_info context/@@plone_lock_info;
                   dummy lifecycle/begin_edit;
                   errors options/state/getErrors | nothing;
                   Iterator python:modules['Products.Archetypes'].IndexIterator;
                   schematas here/Schemata;
                   allow_tabbing python: not view.isMultiPageSchema();
                   fieldsets python:[key for key in schematas.keys() if (schematas[key].editableFields(here, visible_only=True))];
                   default_fieldset python:(not fieldsets or 'default' in fieldsets) and 'default' or fieldsets[0];
                   fieldset request/fieldset|options/fieldset|default_fieldset;
                   fields python:[f for key in fieldsets for f in schematas[key].editableFields(here)];
                   dummy python:here.at_isEditable(fields);
                   portal_type python:here.getPortalTypeName().lower().replace(' ', '_');
                   type_name here/getPortalTypeName|here/archetype_name;
                   base_macros here/edit_macros/macros;
                   edit_template python:'%s_edit' % portal_type;
                   edit_macros python:path('here/%s/macros | nothing' % edit_template);
                   header_macro edit_macros/header | header_macro | base_macros/header;
                   typedescription_macro edit_macros/typedescription | typedescription_macro | base_macros/typedescription;
                   body_macro edit_macros/body | body_macro | base_macros/body;
                   footer_macro edit_macros/footer | footer_macro | base_macros/footer;
                   isLocked isLocked | lock_info/is_locked_for_current_user;
                   css python:here.getUniqueWidgetAttr(fields, 'helper_css');
                   js python:here.getUniqueWidgetAttr(fields, 'helper_js');">
<metal:block use-macro="here/global_defines/macros/defines" />
<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="cynin">

    <tal:block define="macro edit_macros/topslot | nothing" condition="macro">
      <metal:block use-macro="macro" />
    </tal:block>

    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"
            tal:define="charset site_properties/default_charset|string:utf-8"
            tal:attributes="content string:text/html;;charset=${charset}" />
      <metal:baseslot define-slot="base">
      <base tal:attributes="href here/renderBase" /><!--[if lt IE 7]></base><![endif]-->
      </metal:baseslot>
      <meta name="generator" content="cyn.in - http://cyn.in" />
      <div tal:replace="structure provider:plone.htmlhead" />
      <meta tal:define="metatags python:putils.listMetaTags(here).items()"
            tal:condition="metatags"
            tal:repeat="keyval metatags"
            tal:attributes="name python:keyval[0];
                          content python:keyval[1];" />
      <!-- Internet Explorer CSS Fixes -->
      <tal:iefixstart replace="structure string:&lt;!--[if IE]&gt;" />
        <style type="text/css" media="all" tal:condition="exists: portal/yamliehacks.css"
               tal:content="string:@import url($portal_url/yamliehacks.css);">
            </style>
        <style type="text/css" media="all" tal:condition="exists: portal/IEFixes.css"
               tal:content="string:@import url($portal_url/IEFixes.css);">
        </style>
      <tal:iefixend replace="structure string:&lt;![endif]--&gt;" />
      <tal:iefixstart replace="structure string:&lt;!--[if lte IE 6]&gt;" />
        <script type="text/javascript" tal:attributes="src string:${portal_url}/minmax.js"></script>
      <tal:iefixend replace="structure string:&lt;![endif]--&gt;" />
      <link tal:replace="structure provider:plone.htmlhead.links" />
      <!-- Disable IE6 image toolbar -->
      <meta http-equiv="imagetoolbar" content="no" />
      <tal:comment replace="nothing"> A slot where you can insert elements in the header from a template </tal:comment>
      <metal:headslot define-slot="head_slot" />
      <tal:comment replace="nothing"> A slot where you can insert CSS in the header from a template </tal:comment>
      <metal:styleslot define-slot="style_slot" />
      <tal:comment replace="nothing"> This is deprecated, please use style_slot instead. </tal:comment>
      <metal:cssslot define-slot="css_slot" />
      <tal:comment replace="nothing"> A slot where you can insert javascript in the header from a template </tal:comment>
      <metal:javascriptslot define-slot="javascript_head_slot" />
    <tal:block define="macro here/archetypes_custom_js/macros/javascript_head | nothing"
               condition="macro">
      <metal:block use-macro="macro" />
    </tal:block>
    <tal:js condition="js"
            repeat="item js">
      <script type="text/javascript"
              charset="iso-8859-1"
              tal:condition="python:exists('portal/%s' % item)"
              tal:attributes="src string:$portal_url/$item">
      </script>
    </tal:js>
    <tal:block define="macro edit_macros/javascript_head | nothing"
                    condition="macro">
      <metal:block use-macro="macro" />
    </tal:block>

    <tal:css condition="css"
             repeat="item css">
      <style type="text/css"
             media="all"
             tal:condition="python:exists('portal/%s' % item)"
             tal:content="structure string:<!-- @import url($portal_url/$item); -->">
      </style>
    </tal:css>
    <tal:block define="macro edit_macros/css | nothing"
                    condition="macro">
      <metal:block use-macro="macro" />
    </tal:block>




    </head>








  <body>

      <metal:main define-macro="main">
        <metal:use_header use-macro="header_macro" />
        <metal:use_typedescription use-macro="typedescription_macro" />
        <metal:use_body use-macro="body_macro" />
        <metal:use_footer use-macro="footer_macro" />
      </metal:main>

  </body>

</html>

</tal:block>
